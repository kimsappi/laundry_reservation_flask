{% extends "layout.html" %}
{% block content %}
<div class="row">
	{% for date in dates %}
		<div class="col-xs-1 col-sm-1 col-lg-1">
			<div class="row">&nbsp;</div>
			<div class="row">&nbsp;</div>
			{% for time in times %}
				<div class="row">{{ time }}</div>
			{% endfor %}
		</div>
		<div class="col-xs-11 col-sm-5 col-lg-2">
			{{ date }}
			<div class="container-fluid">
			<div class="row">
				{% for machine in machines %}
					<div class="col">
					<div class="row">{{ machine }}</div>
					{% for time in times %}
						<div class="row">
							&nbsp;
							<div id="{{ machine+delim+date+delim+time|string }}" onclick="slot_onclick(this.id);" class="slot free"></div>
						</div>
					{% endfor %}
					</div>
				{% endfor %}
			</div>
			</div>
		</div>
	{% endfor %}
</div>
<div class="row">
	<select id="stair">
		<option selected disabled value="">Stair</option>
		{% for stair in stairs %}
			<option value="{{ stair|string }}">{{ stair|string }}</option>
		{% endfor %}
	</select>
	<select id="apartment">
		<option selected disabled value="">Apartment</option>
		{% for apartment in apartments %}
			<option value="{{ apartment|int }}">{{ apartment|string }}</option>
		{% endfor %}
	</select>
	<input type="text" id="passcode" placeholder="Passcode">
	<input type="text" id="cancellation_code" placeholder="Cancellation code">
</div>
<div class="row">
	<button onclick="submit_changes();">Submit</button>
</div>
<script>
	var user_res = [];
	var user_cancel = [];

	let reservations = JSON.parse( {{ reservations|tojson|safe }} );
	for (let reservation of reservations) {
		let slot = document.getElementById(reservation.machine+'{{ delim|string }}'+reservation.day+'.'+reservation.month+'.'+'{{ delim|string }}'+reservation.hour);
		if (slot != null) {
			slot.classList.replace('free', 'reserved');
		}
	}
</script>
{% endblock content %}
